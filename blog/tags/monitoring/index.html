<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">One post tagged with &quot;monitoring&quot; | Sibi&#x27;s Documentations</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.sibisaravanan.com/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://docs.sibisaravanan.com/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://docs.sibisaravanan.com/blog/tags/monitoring"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:title" content="One post tagged with &quot;monitoring&quot; | Sibi&#x27;s Documentations"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.sibisaravanan.com/blog/tags/monitoring"><link data-rh="true" rel="alternate" href="https://docs.sibisaravanan.com/blog/tags/monitoring" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.sibisaravanan.com/blog/tags/monitoring" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Sibi&#39;s Documentations RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Sibi&#39;s Documentations Atom Feed"><link rel="stylesheet" href="/assets/css/styles.00cf9dc1.css">
<script src="/assets/js/runtime~main.4c2b964f.js" defer="defer"></script>
<script src="/assets/js/main.69ca8c1c.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Sibi&#x27;s Documentations</b></a><a class="navbar__item navbar__link" href="/docs/intro">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/sibisaravanan/sibisaravanan-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/monitoring-linux-servers-using-prometheus-and-grafana">Monitoring Linux Servers Using Prometheus and Grafana</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/aws-single-sign-on-sso">AWS Single Sign-on (SSO)</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="https://schema.org/Blog"><header class="margin-bottom--xl"><h1>One post tagged with &quot;monitoring&quot;</h1><a href="/blog/tags">View All Tags</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="What is Prometheus?"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/monitoring-linux-servers-using-prometheus-and-grafana">Monitoring Linux Servers Using Prometheus and Grafana</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-10-19T00:00:00.000Z" itemprop="datePublished">October 19, 2021</time> · <!-- -->6 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/sibisaravanan" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/33645338" alt="Sibi saravanan" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/sibisaravanan" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Sibi saravanan</span></a></div><small class="avatar__subtitle" itemprop="description">Senior Devops Engineer</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-prometheus">What is Prometheus?<a href="#what-is-prometheus" class="hash-link" aria-label="Direct link to What is Prometheus?" title="Direct link to What is Prometheus?">​</a></h2>
<p><a href="http://prometheus.io/" target="_blank" rel="noopener noreferrer">Prometheus</a> is an open-source tool for monitoring and alerting purposes. It was initially developed in 2012 and is a popular tool in the tech industry even today. This standalone and open-source tool does not belong to any company but is maintained independently as a part of the Cloud Native Computing Foundation since 2016. It makes use of a special type of flexible querying language called the PromQL and fetches metrics from servers and maintains them as time-series data. It also utilizes special purpose libraries and exporters for collecting metrics from third-party systems.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-grafana">What is Grafana?<a href="#what-is-grafana" class="hash-link" aria-label="Direct link to What is Grafana?" title="Direct link to What is Grafana?">​</a></h2>
<p><a href="http://www.grafana.com/" target="_blank" rel="noopener noreferrer">Grafana</a> is an open-source visualization and analytics software. It turns your time series database data into visually appealing amazing dashboards and graphs. The data is usually provided by other metrics collecting and storing tools, in our case the time series data will be fed by Prometheus. It also allows us to create alerts for multiple thresholds and send alert notifications on the configured notifications channel.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="lets-get-started-with-the-monitoring-setup">Let&#x27;s get started with the monitoring setup:<a href="#lets-get-started-with-the-monitoring-setup" class="hash-link" aria-label="Direct link to Let&#x27;s get started with the monitoring setup:" title="Direct link to Let&#x27;s get started with the monitoring setup:">​</a></h2>
<p>We will be using docker containers for setting up Prometheus and Grafana. In addition, we would be running an Nginx container for the reverse proxy to route traffic internally.</p>
<p><img decoding="async" loading="lazy" alt="simple-architecture" src="data:image/png;base64,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" width="467" height="281" class="img_ev3q"></p>
<p>Let&#x27;s first understand the overview of the structure. For this blog, we will be deploying this stack on AWS and will be monitoring the servers in the account.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="monitoring-ec2-servers-on-aws">Monitoring EC2 servers on AWS:<a href="#monitoring-ec2-servers-on-aws" class="hash-link" aria-label="Direct link to Monitoring EC2 servers on AWS:" title="Direct link to Monitoring EC2 servers on AWS:">​</a></h2>
<p>For the context of this blog, we will be monitoring <em>EC2 instances</em> on <em>AWS</em>. But this is not limited to AWS and can be implemented on other cloud platforms and on-premise as well.</p>
<p>We will have one instance server as a host and we will call it the <em>Master node</em>. This node will be having the <em>Prometheus</em>, <em>Grafana</em>, and <em>Nginx</em> containers running on docker. We will be using one of the exporters of Prometheus called the <a href="https://github.com/prometheus/node_exporter" target="_blank" rel="noopener noreferrer">node-exporter</a> to scrape metrics from the target nodes. This exporter will be installed on all target nodes that we plan on monitoring and collecting metrics from.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="architecture">Architecture:<a href="#architecture" class="hash-link" aria-label="Direct link to Architecture:" title="Direct link to Architecture:">​</a></h2>
<p><img decoding="async" loading="lazy" alt="full-architecture.png" src="/assets/images/full-architecture-fe399d59459f8d622a36f3a1fcead42f.png" width="700" height="454" class="img_ev3q"></p>
<p>Referring to the architecture above, the target nodes that have node-exporter installed on them will send the metrics to Prometheus, from which the Grafana will collect the data and visualize it.</p>
<p>Let&#x27;s start the initial setup from scratch,</p>
<p>Create a new folder with a name of your choice, We will call it <em>monitoring</em>.</p>
<p>The folder tree structure will look something like this,</p>
<p><img decoding="async" loading="lazy" alt="file-tree.png" src="/assets/images/file-tree-e5dde727738341af80c3a920db55c104.png" width="509" height="569" class="img_ev3q"></p>
<p>Create the respective <em>files</em> and <em>folders</em> as above.</p>
<p>File 1: This folder will be the root directory.</p>
<p>File 2: <code>docker-compose.yaml</code> This docker-compose file will be used to spin up the different containers.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample">Sample<a href="#sample" class="hash-link" aria-label="Direct link to Sample" title="Direct link to Sample">​</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3.3&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">nginx</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">1.19.4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">user</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> “0”</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">container_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ./nginx/config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/etc/nginx/conf.d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ./nginx/data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/usr/share/nginx/html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ./nginx/logs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/var/log/nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> “80</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">80”</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">restart</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> on</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">failure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">network</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">prometheus</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> prom/prometheus</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">v2.22.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">user</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> “0”</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">container_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> prometheus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ./prometheus/config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/etc/prometheus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ./prometheus/data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/prometheus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> “9090</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">9090”</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">restart</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> on</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">failure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">network</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">grafana</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> grafana/grafana</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">7.3.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">user</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> “0”</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">container_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> grafana</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ./grafana/config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/etc/grafana</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ./grafana/data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/var/lib/grafana</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ./grafana/provisioning</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/etc/grafana/provisioning</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> “3000</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">3000”</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">restart</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> on</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">failure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">network</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">my-network</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">driver</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> bridge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">network</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>File 5: This is the config file for Grafana. A complete guide can be found here.</p>
<p>File 9: <code>dashboard.yaml</code></p>
<p>This <a href="https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards" target="_blank" rel="noopener noreferrer">file</a> contains information about the dashboard.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-1">Sample:<a href="#sample-1" class="hash-link" aria-label="Direct link to Sample:" title="Direct link to Sample:">​</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">providers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;monitoring-dashboard&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">orgId</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">folder</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">disableDeletion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">editable</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">options</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /etc/grafana/provisioning/dashboards</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>File 10: JSON template of the visual dashboard.</p>
<p>Dashboards can be either created in the UI and exported as JSON templates or can be imported into the UI through a <a href="https://grafana.com/docs/grafana/latest/dashboards/json-model/" target="_blank" rel="noopener noreferrer">JSON template</a>.</p>
<p>File 12: <code>datasource.yaml</code></p>
<p>This <a href="https://grafana.com/docs/grafana/latest/administration/provisioning/#example-data-source-config-file" target="_blank" rel="noopener noreferrer">file</a> contains information about the data source, which will be Prometheus in our case.</p>
<p>File 14: <code>notifiers.yaml</code></p>
<p>This <a href="https://grafana.com/docs/grafana/latest/administration/provisioning/#alert-notification-channels" target="_blank" rel="noopener noreferrer">file</a> contains information about the notification channels that are used for sending alerts.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-2">Sample:<a href="#sample-2" class="hash-link" aria-label="Direct link to Sample:" title="Direct link to Sample:">​</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">notifiers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> email</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">org_id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">uid</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> notifier1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">is_default</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">settings</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">addresses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> email@email.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>File 17: <code>prometheus.yaml</code></p>
<p>This <a href="https://prometheus.io/docs/prometheus/latest/configuration/configuration/" target="_blank" rel="noopener noreferrer">file</a> contains the list of all target nodes and their IP addresses from which it has to collect metrics.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-3">Sample:<a href="#sample-3" class="hash-link" aria-label="Direct link to Sample:" title="Direct link to Sample:">​</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">global</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">scrape_interval</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 15s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">scrape_configs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">job_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">scrape_interval</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 5s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">static_configs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">targets</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>File 21: <code>nginx.conf</code></p>
<p>This is the <a href="https://docs.nginx.com/nginx/admin-guide/web-server/reverse-proxy/" target="_blank" rel="noopener noreferrer">configuration file</a> of Nginx which listens to external traffic and does reverse proxy.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-4">Sample:<a href="#sample-4" class="hash-link" aria-label="Direct link to Sample:" title="Direct link to Sample:">​</a></h4>
<div class="language-conf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-conf codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">upstream @prometheus {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server prometheus:9090;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">upstream @grafana {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server grafana:3000;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    listen 80;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server_name domain.com;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    root /usr/share/nginx/html;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    location /grafana/ {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rewrite ^/grafana/(.*)$ /$1 break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        proxy_set_header X-Real-IP $remote_addr;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        proxy_set_header X-NginX-Proxy true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        proxy_ssl_session_reuse off;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        proxy_set_header Host $http_host;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        proxy_cache_bypass $http_upgrade;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        proxy_redirect off;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        proxy_pass http://@grafana;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    location /prometheus/ {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # rewrite ^/prometheus/?$ /prometheus/graph redirect;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # rewrite ^/prometheus/(.*)$ /$1 break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        proxy_set_header X-Real-IP $remote_addr;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        proxy_set_header X-NginX-Proxy true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        proxy_ssl_session_reuse off;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        proxy_set_header Host $http_host;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        proxy_cache_bypass $http_upgrade;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        proxy_redirect off;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        proxy_pass http://@prometheus/;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="running-the-containers">Running the containers:<a href="#running-the-containers" class="hash-link" aria-label="Direct link to Running the containers:" title="Direct link to Running the containers:">​</a></h2>
<p>Inside the monitoring directory, where the docker-compose file is present, we can run the containers by using this command <code>sudo docker-compose up -d</code> This will spin up the three containers and map them to the specified ports.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="installing-node-exporter-on-target-nodes">Installing node-exporter on target nodes:<a href="#installing-node-exporter-on-target-nodes" class="hash-link" aria-label="Direct link to Installing node-exporter on target nodes:" title="Direct link to Installing node-exporter on target nodes:">​</a></h2>
<p>The node exporter should be installed on all the target nodes that would need to be monitored and make sure their IP addresses are entered correctly in the configuration file of Prometheus in point 17. Installation of the exporter can be done by following the steps in this <a href="https://docs.vmware.com/en/Management-Packs-for-vRealize-Operations-Manager/1.5.2/kubernetes-solution/GUID-A1B68BE5-EF38-48E1-AA80-FD71E6F19989.html" target="_blank" rel="noopener noreferrer">document</a>.</p>
<p>Since the containers are up and running, we can view the</p>
<p><code>Grafana at:3000</code>
<code>Prometheus at:9090</code></p>
<p>But with Nginx reverse proxy setup we map a domain with the master node using the <code>nginx.conf</code> file and a <em>DNS record</em> to point the domain to the master node.</p>
<p>After <em>mapping, the domain</em> and <em>proxy_pass</em> rules are written in the <code>nginx.conf</code> file, We can reach <code>Grafana</code>, and <code>Prometheus</code> through custom routes.</p>
<p><code>domain.com/grafana</code></p>
<p>and</p>
<p><code>domain.com/prometheus</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="reference-images">Reference images:<a href="#reference-images" class="hash-link" aria-label="Direct link to Reference images:" title="Direct link to Reference images:">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="prometheus-page">Prometheus page:<a href="#prometheus-page" class="hash-link" aria-label="Direct link to Prometheus page:" title="Direct link to Prometheus page:">​</a></h3>
<p><img decoding="async" loading="lazy" alt="prometheus-sample-page.png" src="/assets/images/prometheus-sample-page-d80dcb3f431dce3429d8632ed1f465b9.png" width="700" height="330" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="grafana-page">Grafana page:<a href="#grafana-page" class="hash-link" aria-label="Direct link to Grafana page:" title="Direct link to Grafana page:">​</a></h3>
<p><img decoding="async" loading="lazy" alt="grafana-sample.png" src="/assets/images/grafana-sample-7e15b7d6505346c93a0fb7bc374edb17.png" width="700" height="358" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion:<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion:" title="Direct link to Conclusion:">​</a></h2>
<p>These open-source tools are easy to use and less complex compared to other monitoring tools available. With community support and additional free plugins and packages, it can be integrated with additional features as well. All in all, Prometheus and Grafana can be the top tools to consider for monitoring Linux servers.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/prometheus">prometheus</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/grafanna">grafanna</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/sre">sre</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/monitoring">monitoring</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/linux">linux</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/node-exporter">node exporter</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/observability">observability</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/sibisaravanan/sibisaravanan-docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Sibi saravanan. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>