<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://docs.sibisaravanan.com/blog</id>
    <title>Sibi's Documentations Blog</title>
    <updated>2021-10-19T00:00:00.000Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://docs.sibisaravanan.com/blog"/>
    <subtitle>Sibi's Documentations Blog</subtitle>
    <icon>https://docs.sibisaravanan.com/img/favicon.ico</icon>
    <entry>
        <title type="html"><![CDATA[Monitoring Linux Servers Using Prometheus and Grafana]]></title>
        <id>https://docs.sibisaravanan.com/blog/monitoring-linux-servers-using-prometheus-and-grafana</id>
        <link href="https://docs.sibisaravanan.com/blog/monitoring-linux-servers-using-prometheus-and-grafana"/>
        <updated>2021-10-19T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[What is Prometheus?]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-prometheus">What is Prometheus?<a href="https://docs.sibisaravanan.com/blog/monitoring-linux-servers-using-prometheus-and-grafana#what-is-prometheus" class="hash-link" aria-label="Direct link to What is Prometheus?" title="Direct link to What is Prometheus?">​</a></h2>
<p><a href="http://prometheus.io/" target="_blank" rel="noopener noreferrer">Prometheus</a> is an open-source tool for monitoring and alerting purposes. It was initially developed in 2012 and is a popular tool in the tech industry even today. This standalone and open-source tool does not belong to any company but is maintained independently as a part of the Cloud Native Computing Foundation since 2016. It makes use of a special type of flexible querying language called the PromQL and fetches metrics from servers and maintains them as time-series data. It also utilizes special purpose libraries and exporters for collecting metrics from third-party systems.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-grafana">What is Grafana?<a href="https://docs.sibisaravanan.com/blog/monitoring-linux-servers-using-prometheus-and-grafana#what-is-grafana" class="hash-link" aria-label="Direct link to What is Grafana?" title="Direct link to What is Grafana?">​</a></h2>
<p><a href="http://www.grafana.com/" target="_blank" rel="noopener noreferrer">Grafana</a> is an open-source visualization and analytics software. It turns your time series database data into visually appealing amazing dashboards and graphs. The data is usually provided by other metrics collecting and storing tools, in our case the time series data will be fed by Prometheus. It also allows us to create alerts for multiple thresholds and send alert notifications on the configured notifications channel.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="lets-get-started-with-the-monitoring-setup">Let's get started with the monitoring setup:<a href="https://docs.sibisaravanan.com/blog/monitoring-linux-servers-using-prometheus-and-grafana#lets-get-started-with-the-monitoring-setup" class="hash-link" aria-label="Direct link to Let's get started with the monitoring setup:" title="Direct link to Let's get started with the monitoring setup:">​</a></h2>
<p>We will be using docker containers for setting up Prometheus and Grafana. In addition, we would be running an Nginx container for the reverse proxy to route traffic internally.</p>
<p><img decoding="async" loading="lazy" alt="simple-architecture" src="data:image/png;base64,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" width="467" height="281" class="img_ev3q"></p>
<p>Let's first understand the overview of the structure. For this blog, we will be deploying this stack on AWS and will be monitoring the servers in the account.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="monitoring-ec2-servers-on-aws">Monitoring EC2 servers on AWS:<a href="https://docs.sibisaravanan.com/blog/monitoring-linux-servers-using-prometheus-and-grafana#monitoring-ec2-servers-on-aws" class="hash-link" aria-label="Direct link to Monitoring EC2 servers on AWS:" title="Direct link to Monitoring EC2 servers on AWS:">​</a></h2>
<p>For the context of this blog, we will be monitoring <em>EC2 instances</em> on <em>AWS</em>. But this is not limited to AWS and can be implemented on other cloud platforms and on-premise as well.</p>
<p>We will have one instance server as a host and we will call it the <em>Master node</em>. This node will be having the <em>Prometheus</em>, <em>Grafana</em>, and <em>Nginx</em> containers running on docker. We will be using one of the exporters of Prometheus called the <a href="https://github.com/prometheus/node_exporter" target="_blank" rel="noopener noreferrer">node-exporter</a> to scrape metrics from the target nodes. This exporter will be installed on all target nodes that we plan on monitoring and collecting metrics from.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="architecture">Architecture:<a href="https://docs.sibisaravanan.com/blog/monitoring-linux-servers-using-prometheus-and-grafana#architecture" class="hash-link" aria-label="Direct link to Architecture:" title="Direct link to Architecture:">​</a></h2>
<p><img decoding="async" loading="lazy" alt="full-architecture.png" src="https://docs.sibisaravanan.com/assets/images/full-architecture-fe399d59459f8d622a36f3a1fcead42f.png" width="700" height="454" class="img_ev3q"></p>
<p>Referring to the architecture above, the target nodes that have node-exporter installed on them will send the metrics to Prometheus, from which the Grafana will collect the data and visualize it.</p>
<p>Let's start the initial setup from scratch,</p>
<p>Create a new folder with a name of your choice, We will call it <em>monitoring</em>.</p>
<p>The folder tree structure will look something like this,</p>
<p><img decoding="async" loading="lazy" alt="file-tree.png" src="https://docs.sibisaravanan.com/assets/images/file-tree-e5dde727738341af80c3a920db55c104.png" width="509" height="569" class="img_ev3q"></p>
<p>Create the respective <em>files</em> and <em>folders</em> as above.</p>
<p>File 1: This folder will be the root directory.</p>
<p>File 2: <code>docker-compose.yaml</code> This docker-compose file will be used to spin up the different containers.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample">Sample<a href="https://docs.sibisaravanan.com/blog/monitoring-linux-servers-using-prometheus-and-grafana#sample" class="hash-link" aria-label="Direct link to Sample" title="Direct link to Sample">​</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"3.3"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">nginx</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">1.19.4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">user</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> “0”</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">container_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ./nginx/config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/etc/nginx/conf.d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ./nginx/data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/usr/share/nginx/html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ./nginx/logs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/var/log/nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> “80</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">80”</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">restart</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> on</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">failure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">network</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">prometheus</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> prom/prometheus</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">v2.22.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">user</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> “0”</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">container_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> prometheus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ./prometheus/config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/etc/prometheus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ./prometheus/data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/prometheus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> “9090</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">9090”</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">restart</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> on</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">failure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">network</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">grafana</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> grafana/grafana</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">7.3.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">user</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> “0”</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">container_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> grafana</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ./grafana/config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/etc/grafana</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ./grafana/data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/var/lib/grafana</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ./grafana/provisioning</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/etc/grafana/provisioning</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> “3000</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">3000”</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">restart</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> on</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">failure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">network</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">my-network</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">driver</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> bridge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">network</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>File 5: This is the config file for Grafana. A complete guide can be found here.</p>
<p>File 9: <code>dashboard.yaml</code></p>
<p>This <a href="https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards" target="_blank" rel="noopener noreferrer">file</a> contains information about the dashboard.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-1">Sample:<a href="https://docs.sibisaravanan.com/blog/monitoring-linux-servers-using-prometheus-and-grafana#sample-1" class="hash-link" aria-label="Direct link to Sample:" title="Direct link to Sample:">​</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">providers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"monitoring-dashboard"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">orgId</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">folder</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">disableDeletion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">editable</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">options</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /etc/grafana/provisioning/dashboards</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>File 10: JSON template of the visual dashboard.</p>
<p>Dashboards can be either created in the UI and exported as JSON templates or can be imported into the UI through a <a href="https://grafana.com/docs/grafana/latest/dashboards/json-model/" target="_blank" rel="noopener noreferrer">JSON template</a>.</p>
<p>File 12: <code>datasource.yaml</code></p>
<p>This <a href="https://grafana.com/docs/grafana/latest/administration/provisioning/#example-data-source-config-file" target="_blank" rel="noopener noreferrer">file</a> contains information about the data source, which will be Prometheus in our case.</p>
<p>File 14: <code>notifiers.yaml</code></p>
<p>This <a href="https://grafana.com/docs/grafana/latest/administration/provisioning/#alert-notification-channels" target="_blank" rel="noopener noreferrer">file</a> contains information about the notification channels that are used for sending alerts.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-2">Sample:<a href="https://docs.sibisaravanan.com/blog/monitoring-linux-servers-using-prometheus-and-grafana#sample-2" class="hash-link" aria-label="Direct link to Sample:" title="Direct link to Sample:">​</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">notifiers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> email</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">org_id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">uid</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> notifier1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">is_default</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">settings</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">addresses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> email@email.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>File 17: <code>prometheus.yaml</code></p>
<p>This <a href="https://prometheus.io/docs/prometheus/latest/configuration/configuration/" target="_blank" rel="noopener noreferrer">file</a> contains the list of all target nodes and their IP addresses from which it has to collect metrics.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-3">Sample:<a href="https://docs.sibisaravanan.com/blog/monitoring-linux-servers-using-prometheus-and-grafana#sample-3" class="hash-link" aria-label="Direct link to Sample:" title="Direct link to Sample:">​</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">global</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">scrape_interval</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 15s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">scrape_configs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">job_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">''</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">scrape_interval</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 5s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">static_configs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">targets</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">''</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>File 21: <code>nginx.conf</code></p>
<p>This is the <a href="https://docs.nginx.com/nginx/admin-guide/web-server/reverse-proxy/" target="_blank" rel="noopener noreferrer">configuration file</a> of Nginx which listens to external traffic and does reverse proxy.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-4">Sample:<a href="https://docs.sibisaravanan.com/blog/monitoring-linux-servers-using-prometheus-and-grafana#sample-4" class="hash-link" aria-label="Direct link to Sample:" title="Direct link to Sample:">​</a></h4>
<div class="language-conf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-conf codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">upstream @prometheus {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server prometheus:9090;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">upstream @grafana {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server grafana:3000;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    listen 80;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server_name domain.com;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    root /usr/share/nginx/html;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    location /grafana/ {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rewrite ^/grafana/(.*)$ /$1 break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        proxy_set_header X-Real-IP $remote_addr;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        proxy_set_header X-NginX-Proxy true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        proxy_ssl_session_reuse off;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        proxy_set_header Host $http_host;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        proxy_cache_bypass $http_upgrade;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        proxy_redirect off;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        proxy_pass http://@grafana;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    location /prometheus/ {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # rewrite ^/prometheus/?$ /prometheus/graph redirect;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # rewrite ^/prometheus/(.*)$ /$1 break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        proxy_set_header X-Real-IP $remote_addr;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        proxy_set_header X-NginX-Proxy true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        proxy_ssl_session_reuse off;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        proxy_set_header Host $http_host;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        proxy_cache_bypass $http_upgrade;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        proxy_redirect off;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        proxy_pass http://@prometheus/;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="running-the-containers">Running the containers:<a href="https://docs.sibisaravanan.com/blog/monitoring-linux-servers-using-prometheus-and-grafana#running-the-containers" class="hash-link" aria-label="Direct link to Running the containers:" title="Direct link to Running the containers:">​</a></h2>
<p>Inside the monitoring directory, where the docker-compose file is present, we can run the containers by using this command <code>sudo docker-compose up -d</code> This will spin up the three containers and map them to the specified ports.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="installing-node-exporter-on-target-nodes">Installing node-exporter on target nodes:<a href="https://docs.sibisaravanan.com/blog/monitoring-linux-servers-using-prometheus-and-grafana#installing-node-exporter-on-target-nodes" class="hash-link" aria-label="Direct link to Installing node-exporter on target nodes:" title="Direct link to Installing node-exporter on target nodes:">​</a></h2>
<p>The node exporter should be installed on all the target nodes that would need to be monitored and make sure their IP addresses are entered correctly in the configuration file of Prometheus in point 17. Installation of the exporter can be done by following the steps in this <a href="https://docs.vmware.com/en/Management-Packs-for-vRealize-Operations-Manager/1.5.2/kubernetes-solution/GUID-A1B68BE5-EF38-48E1-AA80-FD71E6F19989.html" target="_blank" rel="noopener noreferrer">document</a>.</p>
<p>Since the containers are up and running, we can view the</p>
<p><code>Grafana at:3000</code>
<code>Prometheus at:9090</code></p>
<p>But with Nginx reverse proxy setup we map a domain with the master node using the <code>nginx.conf</code> file and a <em>DNS record</em> to point the domain to the master node.</p>
<p>After <em>mapping, the domain</em> and <em>proxy_pass</em> rules are written in the <code>nginx.conf</code> file, We can reach <code>Grafana</code>, and <code>Prometheus</code> through custom routes.</p>
<p><code>domain.com/grafana</code></p>
<p>and</p>
<p><code>domain.com/prometheus</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="reference-images">Reference images:<a href="https://docs.sibisaravanan.com/blog/monitoring-linux-servers-using-prometheus-and-grafana#reference-images" class="hash-link" aria-label="Direct link to Reference images:" title="Direct link to Reference images:">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="prometheus-page">Prometheus page:<a href="https://docs.sibisaravanan.com/blog/monitoring-linux-servers-using-prometheus-and-grafana#prometheus-page" class="hash-link" aria-label="Direct link to Prometheus page:" title="Direct link to Prometheus page:">​</a></h3>
<p><img decoding="async" loading="lazy" alt="prometheus-sample-page.png" src="https://docs.sibisaravanan.com/assets/images/prometheus-sample-page-d80dcb3f431dce3429d8632ed1f465b9.png" width="700" height="330" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="grafana-page">Grafana page:<a href="https://docs.sibisaravanan.com/blog/monitoring-linux-servers-using-prometheus-and-grafana#grafana-page" class="hash-link" aria-label="Direct link to Grafana page:" title="Direct link to Grafana page:">​</a></h3>
<p><img decoding="async" loading="lazy" alt="grafana-sample.png" src="https://docs.sibisaravanan.com/assets/images/grafana-sample-7e15b7d6505346c93a0fb7bc374edb17.png" width="700" height="358" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion:<a href="https://docs.sibisaravanan.com/blog/monitoring-linux-servers-using-prometheus-and-grafana#conclusion" class="hash-link" aria-label="Direct link to Conclusion:" title="Direct link to Conclusion:">​</a></h2>
<p>These open-source tools are easy to use and less complex compared to other monitoring tools available. With community support and additional free plugins and packages, it can be integrated with additional features as well. All in all, Prometheus and Grafana can be the top tools to consider for monitoring Linux servers.</p>]]></content>
        <author>
            <name>Sibi saravanan</name>
            <uri>https://github.com/sibisaravanan</uri>
        </author>
        <category label="prometheus" term="prometheus"/>
        <category label="grafanna" term="grafanna"/>
        <category label="sre" term="sre"/>
        <category label="monitoring" term="monitoring"/>
        <category label="linux" term="linux"/>
        <category label="node exporter" term="node exporter"/>
        <category label="observability" term="observability"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[AWS Single Sign-on (SSO)]]></title>
        <id>https://docs.sibisaravanan.com/blog/aws-single-sign-on-sso</id>
        <link href="https://docs.sibisaravanan.com/blog/aws-single-sign-on-sso"/>
        <updated>2020-11-18T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[aws-sso-workflow]]></summary>
        <content type="html"><![CDATA[<p><img decoding="async" loading="lazy" alt="aws-sso-workflow" src="https://docs.sibisaravanan.com/assets/images/aws-sso-workflow-eb6c1d2876e1842592b2a48add659869.avif" width="639" height="561" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="hassle-free-access-management-with-aws-single-sign-on-sso">Hassle-free access management with AWS Single Sign-on (SSO)<a href="https://docs.sibisaravanan.com/blog/aws-single-sign-on-sso#hassle-free-access-management-with-aws-single-sign-on-sso" class="hash-link" aria-label="Direct link to Hassle-free access management with AWS Single Sign-on (SSO)" title="Direct link to Hassle-free access management with AWS Single Sign-on (SSO)">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="https://docs.sibisaravanan.com/blog/aws-single-sign-on-sso#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h3>
<p>AWS Single Sign-on is a single sign-on access providing service by Amazon web Services. AWS SSO allows you to access multiple AWS accounts and other Business applications just with a single access credential having them centrally managed. One of the painful processes is having to maintain several different access credentials and remembering which key is for which service. And this is where AWS SSO comes into the picture. How nice and convenient would it be if we could open multiple locked doors with the same key, eliminating the hassle of maintaining a bunch of different keys? Let’s deep dive and look into more interesting things you could do with the AWS SSO service.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lets-get-started">Let’s get started<a href="https://docs.sibisaravanan.com/blog/aws-single-sign-on-sso#lets-get-started" class="hash-link" aria-label="Direct link to Let’s get started" title="Direct link to Let’s get started">​</a></h3>
<p>You can access AWS SSO right from the <a href="https://us-east-1.signin.aws.amazon.com/oauth?response_type=code&amp;client_id=arn%3Aaws%3Aiam%3A%3A015428540659%3Auser%2Fhomepage&amp;redirect_uri=https%3A%2F%2Fconsole.aws.amazon.com%2Fconsole%2Fhome%3Fnc2%3Dh_ct%26src%3Dheader-signin%26state%3DhashArgs%2523%26isauthcode%3Dtrue&amp;forceMobileLayout=0&amp;forceMobileApp=0&amp;code_challenge=DNJywQV_kbc352eXdBUUtFCq6xlBx1YeYX737H8RkbY&amp;code_challenge_method=SHA-256" target="_blank" rel="noopener noreferrer">AWS Management Console</a>. The AWS Organisation Administrator can configure permissions and access controls for all the AWS accounts and users centrally without any complexity. Since all this work can be done in a single dashboard-like user portal, it eliminates the work of setting up the configurations manually on each account.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-and-managing-user-identities-in-aws-sso">Creating and managing user identities in AWS SSO<a href="https://docs.sibisaravanan.com/blog/aws-single-sign-on-sso#creating-and-managing-user-identities-in-aws-sso" class="hash-link" aria-label="Direct link to Creating and managing user identities in AWS SSO" title="Direct link to Creating and managing user identities in AWS SSO">​</a></h3>
<p>The AWS Organization Administrator can create new identities for individual users and even user groups within the AWS SSO user portal and manage them centrally all in one place. The AWS SSO also provides the facility of connecting existing user identities from third-party external user directories with the AWS SSO user directory. They include</p>
<ul>
<li>Microsoft Active Directory</li>
<li>Okta Universal Directory</li>
<li>Azure AD</li>
</ul>
<p>And many more supported identity providers. <a href="https://docs.aws.amazon.com/singlesignon/latest/userguide/supported-idps.html" target="_blank" rel="noopener noreferrer">Click here to learn more</a>. You can also automate this process of granting users and user groups permissions by using <em>API</em>s and <em>AWS Cloudformation</em> service.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="auto-sync-identities-from-other-directories">Auto-sync identities from other directories<a href="https://docs.sibisaravanan.com/blog/aws-single-sign-on-sso#auto-sync-identities-from-other-directories" class="hash-link" aria-label="Direct link to Auto-sync identities from other directories" title="Direct link to Auto-sync identities from other directories">​</a></h3>
<p>After integrating user identities from any of the external directories mentioned above, user identities are automatically synchronized from those directories. This means whenever new identities are created or changes are made to the existing identities, it automatically gets reflected in the AWS SSO dashboard, eliminating the need for manual periodic synchronizations.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="built-in-integrations-for-other-business-applications">Built-in integrations for other business applications<a href="https://docs.sibisaravanan.com/blog/aws-single-sign-on-sso#built-in-integrations-for-other-business-applications" class="hash-link" aria-label="Direct link to Built-in integrations for other business applications" title="Direct link to Built-in integrations for other business applications">​</a></h3>
<p>AWS SSO not only allows us to grant access to AWS accounts and services but also supports other business applications. To mention a few popular ones,</p>
<ul>
<li>Atlassian</li>
<li>Dropbox</li>
<li>Github</li>
<li>G Suite</li>
<li>Office365</li>
<li>Salesforce</li>
<li>Slack</li>
</ul>
<p>Many more pre-integrated applications can be found here. <a href="https://docs.aws.amazon.com/singlesignon/latest/userguide/saasapps.html#saasapps-supported" target="_blank" rel="noopener noreferrer">Click to view</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="steps-to-setup-aws-sso-in-the-management-console">Steps to setup AWS SSO in the Management Console<a href="https://docs.sibisaravanan.com/blog/aws-single-sign-on-sso#steps-to-setup-aws-sso-in-the-management-console" class="hash-link" aria-label="Direct link to Steps to setup AWS SSO in the Management Console" title="Direct link to Steps to setup AWS SSO in the Management Console">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-1-enable-aws-sso">Step 1: Enable AWS SSO<a href="https://docs.sibisaravanan.com/blog/aws-single-sign-on-sso#step-1-enable-aws-sso" class="hash-link" aria-label="Direct link to Step 1: Enable AWS SSO" title="Direct link to Step 1: Enable AWS SSO">​</a></h4>
<ul>
<li>Log in to your <a href="https://us-east-1.signin.aws.amazon.com/oauth?response_type=code&amp;client_id=arn%3Aaws%3Aiam%3A%3A015428540659%3Auser%2Fhomepage&amp;redirect_uri=https%3A%2F%2Fconsole.aws.amazon.com%2Fconsole%2Fhome%3Fnc2%3Dh_ct%26src%3Dheader-signin%26state%3DhashArgs%2523%26isauthcode%3Dtrue&amp;forceMobileLayout=0&amp;forceMobileApp=0&amp;code_challenge=DNJywQV_kbc352eXdBUUtFCq6xlBx1YeYX737H8RkbY&amp;code_challenge_method=SHA-256" target="_blank" rel="noopener noreferrer">AWS Management Console</a> on your favourite browser.</li>
<li>Search for AWS Single sign-on in AWS Services.</li>
<li>Make sure you have an AWS Organization setup. If not, click <em>“Create AWS Organization”</em> to set one up.</li>
<li>After setting up an organization, Click <em>“Enable AWS SSO”</em> as shown below.</li>
</ul>
<p><img decoding="async" loading="lazy" alt="step-1.png" src="https://docs.sibisaravanan.com/assets/images/step-1-7732e8e87f0690377e9136193abb94ab.png" width="700" height="351" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-2-select-the-source-of-identity">Step 2: Select the source of Identity<a href="https://docs.sibisaravanan.com/blog/aws-single-sign-on-sso#step-2-select-the-source-of-identity" class="hash-link" aria-label="Direct link to Step 2: Select the source of Identity" title="Direct link to Step 2: Select the source of Identity">​</a></h4>
<p>The AWS SSO store holds the identities of the users that are needed to be given access. You are also given the option to choose from the list of <a href="https://docs.aws.amazon.com/singlesignon/latest/userguide/supported-idps.html" target="_blank" rel="noopener noreferrer">supported external identity providers</a> as the source of identity. As discussed earlier the AWS SSO also provides automatic synchronization of users from those external sources as well.</p>
<p><img decoding="async" loading="lazy" alt="step-2.png" src="https://docs.sibisaravanan.com/assets/images/step-2-8701e1507a532cb4e4c99e9744dbfeee.png" width="700" height="450" class="img_ev3q"></p>
<p>After adding users, they appear as a list of authenticated users. Now you can assign specific permissions to each user individually or put together a bunch of users as a user group and assign permissions to that group.</p>
<p>Here is a guide for setting up a few popular external identities:</p>
<ul>
<li><em>AWS SSO Store</em> - <a href="https://docs.aws.amazon.com/singlesignon/latest/userguide/manage-your-identity-source-sso.html" target="_blank" rel="noopener noreferrer">managing user identities in default AWS SSO store</a>.</li>
<li><em>Microsoft AD Directory</em> — <a href="https://docs.aws.amazon.com/singlesignon/latest/userguide/manage-your-identity-source-ad.html" target="_blank" rel="noopener noreferrer">Connect your Microsoft AD Directory with AWS SSO</a>.</li>
<li><em>OKTA Directory</em> — <a href="https://docs.aws.amazon.com/singlesignon/latest/userguide/okta-idp.html#okta-step2" target="_blank" rel="noopener noreferrer">Connecting with OKTA user directory</a>.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-3-assigning-sso-access-to-aws-accounts-and-applications">Step 3: Assigning SSO access to AWS Accounts and Applications<a href="https://docs.sibisaravanan.com/blog/aws-single-sign-on-sso#step-3-assigning-sso-access-to-aws-accounts-and-applications" class="hash-link" aria-label="Direct link to Step 3: Assigning SSO access to AWS Accounts and Applications" title="Direct link to Step 3: Assigning SSO access to AWS Accounts and Applications">​</a></h4>
<p>The AWS SSO provides authorized users with personalized <em>user portal</em> access to several <em>AWS Accounts</em> or <em>Applications</em>, using their credentials that were set up in AWS SSO.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="aws-accounts">AWS Accounts:<a href="https://docs.sibisaravanan.com/blog/aws-single-sign-on-sso#aws-accounts" class="hash-link" aria-label="Direct link to AWS Accounts:" title="Direct link to AWS Accounts:">​</a></h5>
<ol>
<li>Inside the <a href="https://console.aws.amazon.com/singlesignon" target="_blank" rel="noopener noreferrer">AWS SSO</a> console, Click on AWS Accounts.</li>
<li>Click <em>“Assign users”</em> to add a list of users to specific AWS accounts that they can access using their AWS SSO credentials.</li>
<li>Create permissions set in the permissions tab. A <a href="https://docs.aws.amazon.com/singlesignon/latest/userguide/permissionsetsconcept.html" target="_blank" rel="noopener noreferrer">permission set</a> is a set of permissions that can be assigned to <em>users or groups</em>.</li>
</ol>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="aws-applications">AWS Applications:<a href="https://docs.sibisaravanan.com/blog/aws-single-sign-on-sso#aws-applications" class="hash-link" aria-label="Direct link to AWS Applications:" title="Direct link to AWS Applications:">​</a></h5>
<ol>
<li>
<p>In the <a href="https://console.aws.amazon.com/singlesignon" target="_blank" rel="noopener noreferrer">AWS SSO</a> console, choose <em>Applications</em> in the left navigation pane.</p>
</li>
<li>
<p>Select your desired application in the list.</p>
</li>
<li>
<p>Choose Actions, and then choose either Disable or Enable.</p>
</li>
</ol>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="other-business-applications">Other Business Applications:<a href="https://docs.sibisaravanan.com/blog/aws-single-sign-on-sso#other-business-applications" class="hash-link" aria-label="Direct link to Other Business Applications:" title="Direct link to Other Business Applications:">​</a></h5>
<p>The AWS SSO not only works with AWS Applications but also with other business’ cloud applications. A detailed guide for setting up AWS SSO credentials for those applications from other businesses can be found here. <a href="https://docs.aws.amazon.com/singlesignon/latest/userguide/saasapps.html#saasapps-addconfigapp" target="_blank" rel="noopener noreferrer">Click to learn more</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="aws-sso--iam">AWS SSO + IAM<a href="https://docs.sibisaravanan.com/blog/aws-single-sign-on-sso#aws-sso--iam" class="hash-link" aria-label="Direct link to AWS SSO + IAM" title="Direct link to AWS SSO + IAM">​</a></h3>
<p>When getting started with AWS, we start by creating an AWS Account. In that account, we first create an organization, and under that organization, we create one or more AWS user accounts. There is not much to worry about when there is just you and a friend, but in the case of a company, you will have many employees to be given access to AWS. So, you create IAM roles and permissions for several users and group them based on their type of job or department, etc. At the end of the day, you end up with many IAM roles and permissions for every single account added to the organization. It can indeed get complicated in handling the users and the IAM configuration. That’s one of the main reasons for AWS to come up with AWS SSO.</p>
<p>AWS SSO eliminates the work of managing users with IAM permissions by giving access to the users to handle their accounts. In SSO, all you have to do is to add the user to the AWS SSO directory and assign to them the required permissions. Then the users can log in to their accounts through the SSO user portal without any hassle.</p>
<p>From a security standpoint, when you have to assign IAM permissions to a user, you have to go to the specific user and alter their permissions or roles. When a user has to access something from another account, which is typically called cross-account access, the administrator has to give access permission to every AWS account. As long as it goes smoothly we don’t have a problem. The security of the sensitive components in the cloud is at stake when excessive permissions are assigned to undesignated personnel in the company. But in the case of AWS SSO, you can manage the users in groups all in one place and can be confident that the right person has the right access permissions without having to worry about things going wrong. Dealing with each user individually and assigning IAM permissions is what stands out in the case of SSO.</p>
<p>Let’s imagine a case where we have a user called Chloe. Now Chloe has access to her account ‘X’. She wants to access an S3 bucket that resides in another account, say ‘Y’. Now she has to assume a role that was assigned to her, which grants access to S3 service alone from her account ‘X’ and access the bucket in account ‘Y’. This role gives temporary credentials to Chloe with which she can access the S3 bucket in account ‘Y’. This is the main source of the pain because the administrator needs to deploy and manage many policies and roles across the AWS accounts.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="https://docs.sibisaravanan.com/blog/aws-single-sign-on-sso#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h3>
<p>The SSO eliminates all these knick-knacks-looking jobs of configuring IAM access to users and makes it easy to handle user access management all in one place. It also eliminates the fear of security breaches from misconfigured IAM permissions and roles and the combination of AWS SSO and IAM just makes life easier in the world of AWS user management.</p>]]></content>
        <author>
            <name>Sibi saravanan</name>
            <uri>https://github.com/sibisaravanan</uri>
        </author>
        <category label="AWS" term="AWS"/>
        <category label="AWS SSO" term="AWS SSO"/>
        <category label="Cloud" term="Cloud"/>
        <category label="SSO" term="SSO"/>
    </entry>
</feed>